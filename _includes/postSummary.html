{% assign minutes = post.content | number_of_words | divided_by: 120 %}
{% if minutes == 0 %}
{% assign minutes = 1 %}
{% endif %}

{% if post.author %}
{% assign author = site.data.authors[post.author] %}
{% endif %}

<div class="post">
    <div class="date">
        <time datetime="{{ post.date | date: "%Y-%m-%d" }}">
            <span class="day">{{ post.date | date: "%-d" }}</span>
            <span class="month">{{ post.date | date: "%b '%y" }}</span>
        </time>
    </div>

    <h2><a href="{{ post.url }}">{{ post.title }}</a></h2>

    {% if post.image %}
    <div class="image" style="background-image: url('/images/{{ post.image }}');">
        <a href="{{ post.url }}"></a>
    </div>
    {% endif %}

    <p>{{ post.summary }}</p>

    <div class="cta flex">
        {% if post.author %}
        <div class="author flex-item">
            <header>Author:</header>
            <p>
                {% if page.className != 'authors' %}<a href="/authors#{{ post.author }}">{% endif %}
                    {{ author.name }}
                {% if page.className != 'authors' %}</a>{% endif %}
            </p>
        </div>
        {% endif %}
        {% if post.category %}
        <div class="categories flex-item">
            <header>Category:</header>
            <a href="{{ post.category | category_link }}">{{ post.category }}</a>
        </div>
        {% endif %}
        <div class="read flex-item">
            <header>Time:</header>
            <p>{{ minutes }} minute read</p>
        </div>
    </div>
</div>
